# 🏦 אינטגרציית בנקאות פתוחה - מדריך מלא

## 📋 מוסדות פיננסיים נתמכים

### 🏦 בנקים (14)
1. **בנק לאומי** - עו"ש, חסכון, אשראי, השקעות
2. **בנק הפועלים** - עו"ש, חסכון, אשראי, השקעות
3. **בנק דיסקונט** - עו"ש, חסכון, אשראי
4. **בנק מזרחי טפחות** - עו"ש, חסכון, אשראי
5. **בנק הבינלאומי** - עו"ש, חסכון, אשראי
6. **בנק ירושלים** - עו"ש, חסכון
7. **בנק אוצר החייל** - עו"ש, חסכון
8. **בנק הדואר** - עו"ש, חסכון
9. **בנק יהב** - עו"ש, חסכון
10. **בנק מסד** - עו"ש, חסכון
11. **בנק מרכנתיל** - עו"ש, חסכון, אשראי

### 💳 חברות אשראי (5)
1. **ישראכרט** - ויזה, מאסטרקארד
2. **כ.א.ל** - דיינרס
3. **מקס** - כרטיסי אשראי
4. **לאומי כרטיסים** - כרטיסי לאומי
5. **אמריקן אקספרס** - AMEX

### 📈 חברות השקעות (6)
1. **מיטב דש** - תיקי השקעות וניירות ערך
2. **פסגות** - תיקי השקעות וניירות ערך
3. **אקסלנס** - תיקי השקעות וניירות ערך
4. **אלטשולר שחם** - תיקי השקעות וניירות ערך
5. **IBI** - תיקי השקעות וניירות ערך
6. **לידר השקעות** - תיקי השקעות

### 🛡️ פנסיה וביטוח (6)
1. **מנורה מבטחים** - פנסיה, קופות גמל, ביטוח
2. **מגדל** - פנסיה, קופות גמל, ביטוח
3. **כלל ביטוח** - פנסיה, קופות גמל, ביטוח
4. **הראל** - פנסיה, קופות גמל, ביטוח
5. **הפניקס** - פנסיה, ביטוח
6. **איילון** - פנסיה, ביטוח

### 🌐 ספקי בנקאות פתוחה (3)
1. **פאפר (Pepper)** - מרכז את כל החשבונות
2. **Salt Edge** - ספק בינלאומי
3. **Mono** - פלטפורמת API

---

## 🔐 איך זה עובד?

### OAuth 2.0 Flow

\`\`\`
1. המשתמש בוחר מוסד פיננסי
   ↓
2. המערכת מפנה לדף אימות של המוסד
   ↓
3. המשתמש מזין סיסמה (במוסד עצמו - לא אצלנו!)
   ↓
4. המוסד מחזיר token מאובטח
   ↓
5. המערכת משתמשת ב-token לסנכרון
\`\`\`

### אבטחה

- ✅ **הצפנה מלאה** - כל התקשורת מוצפנת
- ✅ **אין גישה לסיסמאות** - המשתמש מזין רק באתר הבנק
- ✅ **Tokens מוגבלים בזמן** - תוקף של 90 יום
- ✅ **Read-Only Access** - אפשר רק לקרוא, לא לבצע תשלומים
- ✅ **ניתן לנתק** - ניתוק מיידי בכל רגע

---

## 🚀 שימוש

### חיבור בנק/חברה

1. לחץ על "בנקאות פתוחה" בתפריט
2. בחר את המוסד הפיננסי
3. לחץ "התחבר עכשיו"
4. הזן סיסמה באתר הבנק
5. אשר הרשאות
6. ✅ החיבור מוכן!

### סנכרון אוטומטי

- **תדירות**: פעם ביום (אוטומטי)
- **ידני**: לחץ על כפתור רענון
- **היסטוריה**: 90 יום אחורה

### ניתוק חיבור

1. לך ל"החיבורים שלי"
2. לחץ על סמל הפח ליד החיבור
3. אשר ניתוק
4. ✅ החיבור נותק

---

## 💻 התקנה טכנית

### Environment Variables

\`\`\`bash
# Pepper API (אופציונלי)
PEPPER_API_KEY=your_pepper_api_key
PEPPER_API_SECRET=your_pepper_secret

# Salt Edge (אופציונלי)
SALTEDGE_APP_ID=your_app_id
SALTEDGE_SECRET=your_secret

# Mono (אופציונלי)
MONO_API_KEY=your_mono_key
\`\`\`

### הרצת Migration

\`\`\`sql
-- הטבלאות הנדרשות כבר קיימות ב:
-- supabase/migrations/20260220000000_advanced_features.sql

-- open_banking_connections
-- sync_history
\`\`\`

### API Integration

כרגע המערכת עובדת במצב **MOCK** (סימולציה).  
לחיבור אמיתי, צריך:

1. **להירשם לספק** (Pepper / Salt Edge / Mono)
2. **לקבל API Keys**
3. **להפעיל ב-Backend** (פונקציות Serverless)

---

## 📊 תכונות מתקדמות

### קטגוריזציה אוטומטית

המערכת מזהה אוטומטית:
- 🏪 **סופרמרקטים** → מזון - סופרמרקט
- ⛽ **תחנות דלק** → תחבורה - דלק
- 🏥 **בתי מרקחת** → בריאות - תרופות
- 🍕 **מסעדות** → מזון - מסעדות

### מעקב חכם

- 📈 **גרפים** - הוצאות לאורך זמן
- 💡 **תובנות** - "ההוצאות על מזון עלו ב-15%"
- 🎯 **התראות** - "חרגת מתקציב הבילויים"

### יצוא נתונים

- **Excel** - כל התנועות מכל החשבונות
- **CSV** - לייבוא לתוכנות אחרות
- **PDF** - דוח חודשי מעוצב

---

## 🔮 עתיד

### בקרוב
- [ ] חיבור אמיתי ל-Pepper API
- [ ] סנכרון אוטומטי כל 4 שעות
- [ ] התראות Push על תנועות חשודות
- [ ] ML לזיהוי הוצאות חריגות

### בתכנון
- [ ] תמיכה ב-PayPal
- [ ] תמיכה ב-Crypto Wallets
- [ ] חיבור ל-eToro
- [ ] חיבור לבורסה ישירות

---

## 📞 תמיכה

### שאלות נפוצות

**ש: האם זה בטוח?**  
ת: כן! אנחנו לא רואים את הסיסמה שלך אף פעם. הכל עובר דרך OAuth מאובטח.

**ש: כמה זה עולה?**  
ת: החיבור חינמי. ספקי API חיצוניים עשויים לגבות עמלה.

**ש: מה קורה אם אני משנה סיסמה בבנק?**  
ת: תצטרך לחבר מחדש את החיבור.

**ש: האם הבנק רואה שאני משתמש בשירות?**  
ת: כן, הבנק מכיר בחיבור ורואה שהוא פעיל.

---

**סה"כ: 40+ מוסדות פיננסיים נתמכים! 🎉**
